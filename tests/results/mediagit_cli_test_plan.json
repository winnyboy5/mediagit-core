{
  "test_plan_metadata": {
    "version": "1.0",
    "created": "2025-12-10",
    "project": "mediagit-core",
    "description": "Comprehensive CLI command testing and validation plan",
    "total_commands": 22,
    "test_file_location": "/mnt/d/own/saas/mediagit-core/test-files",
    "storage_backends": ["local", "azure", "gcs", "minio"],
    "priority_levels": {
      "P0": "Critical - Blocking functionality",
      "P1": "High - Major functionality impaired",
      "P2": "Medium - Minor issues or enhancements",
      "P3": "Low - Nice to have"
    }
  },
  "identified_critical_issues": [
    {
      "issue_id": "ISS-001",
      "priority": "P0",
      "command": "branch switch",
      "description": "Branch switching only updates HEAD reference but does NOT update working directory files",
      "expected_behavior": "When switching branches, working directory should show only files from the target branch (like git switch)",
      "actual_behavior": "Working directory retains files from all branches",
      "root_cause": "Missing checkout/working directory update mechanism in switch implementation (branch.rs:339-384)",
      "fix_required": "Implement working directory update when switching branches",
      "status": "identified"
    },
    {
      "issue_id": "ISS-002",
      "priority": "P0",
      "command": "branch switch",
      "description": "Index (staging area) not updated when switching branches",
      "expected_behavior": "Staging area should be cleared or updated to match target branch state",
      "actual_behavior": "Staging area persists across branch switches",
      "root_cause": "No index management in switch operation",
      "fix_required": "Clear or update index when switching branches",
      "status": "identified"
    },
    {
      "issue_id": "ISS-003",
      "priority": "P1",
      "command": "general",
      "description": "No checkout mechanism to restore files from commits",
      "expected_behavior": "Ability to restore working directory files from any commit",
      "actual_behavior": "Missing checkout functionality",
      "root_cause": "Checkout operation not implemented in versioning layer",
      "fix_required": "Implement checkout functionality in mediagit-versioning",
      "status": "identified"
    }
  ],
  "test_categories": [
    {
      "category_id": "CAT-01",
      "name": "Repository Initialization",
      "commands": ["init"],
      "test_cases": [
        {
          "test_id": "TC-001",
          "priority": "P0",
          "command": "mediagit init",
          "description": "Initialize new repository in empty directory",
          "preconditions": "Empty directory",
          "test_steps": [
            "Create empty test directory",
            "Run 'mediagit init'",
            "Verify .mediagit directory created",
            "Verify refs/heads directory exists",
            "Verify objects directory exists",
            "Verify HEAD file created"
          ],
          "expected_result": "Repository structure created successfully",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-002",
          "priority": "P1",
          "command": "mediagit init",
          "description": "Initialize repository with existing files",
          "preconditions": "Directory with test files",
          "test_steps": [
            "Copy test files to directory",
            "Run 'mediagit init'",
            "Verify repository created without affecting existing files"
          ],
          "expected_result": "Repository initialized, files unchanged",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-003",
          "priority": "P2",
          "command": "mediagit init",
          "description": "Initialize in already initialized directory",
          "preconditions": "Existing mediagit repository",
          "test_steps": [
            "Run 'mediagit init' in existing repo",
            "Verify appropriate error or warning"
          ],
          "expected_result": "Error message or safe re-initialization",
          "status": "untested",
          "backends": ["local"]
        }
      ]
    },
    {
      "category_id": "CAT-02",
      "name": "File Staging (Add)",
      "commands": ["add"],
      "test_cases": [
        {
          "test_id": "TC-010",
          "priority": "P0",
          "command": "mediagit add",
          "description": "Stage single video file",
          "test_files": ["101394-video-720.mp4"],
          "test_steps": [
            "Initialize repository",
            "Copy video file to repo",
            "Run 'mediagit add 101394-video-720.mp4'",
            "Verify file staged in index",
            "Run 'mediagit status' to confirm"
          ],
          "expected_result": "File staged successfully, appears in status",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-011",
          "priority": "P0",
          "command": "mediagit add",
          "description": "Stage multiple files of different types",
          "test_files": ["101394-video-720.mp4", "12690118_5053480.ai", "1900s_telephone.stl"],
          "test_steps": [
            "Initialize repository",
            "Copy multiple test files",
            "Run 'mediagit add *.mp4 *.ai *.stl'",
            "Verify all files staged"
          ],
          "expected_result": "All files staged correctly",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-012",
          "priority": "P1",
          "command": "mediagit add",
          "description": "Stage large 3D model file",
          "test_files": ["1965_ac_shelby_427_cobra_sc.glb"],
          "test_steps": [
            "Initialize repository",
            "Copy large GLB file (13.7MB)",
            "Run 'mediagit add *.glb'",
            "Verify large file handling"
          ],
          "expected_result": "Large file staged without errors",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-013",
          "priority": "P0",
          "command": "mediagit add",
          "description": "Stage audio files (FLAC, OGG, WAV)",
          "test_files": ["_Amir_Tangsiri__Dokhtare_Koli.flac", "_Into_the_Oceans_and_the_Air_.ogg", "_Quando_le_sere_al_placido__(Ferruccio_Giannini).wav"],
          "test_steps": [
            "Initialize repository",
            "Copy audio files",
            "Run 'mediagit add' for each audio format",
            "Verify proper handling of different audio codecs"
          ],
          "expected_result": "All audio formats staged correctly",
          "status": "untested",
          "backends": ["local"]
        }
      ]
    },
    {
      "category_id": "CAT-03",
      "name": "Commit Operations",
      "commands": ["commit"],
      "test_cases": [
        {
          "test_id": "TC-020",
          "priority": "P0",
          "command": "mediagit commit",
          "description": "Create first commit with staged files",
          "preconditions": "Files staged in index",
          "test_steps": [
            "Stage test files",
            "Run 'mediagit commit -m \"Initial commit\"'",
            "Verify commit created",
            "Verify HEAD points to commit",
            "Verify index cleared"
          ],
          "expected_result": "Commit created, index cleared, HEAD updated",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-021",
          "priority": "P1",
          "command": "mediagit commit",
          "description": "Commit with empty message should fail",
          "test_steps": [
            "Stage files",
            "Run 'mediagit commit -m \"\"'",
            "Verify error"
          ],
          "expected_result": "Error: commit message required",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-022",
          "priority": "P0",
          "command": "mediagit commit",
          "description": "Sequential commits on same branch",
          "test_steps": [
            "Create commit 1 with file A",
            "Stage file B",
            "Create commit 2",
            "Verify commit chain",
            "Verify parent relationships"
          ],
          "expected_result": "Proper commit chain with parent references",
          "status": "untested",
          "backends": ["local"]
        }
      ]
    },
    {
      "category_id": "CAT-04",
      "name": "Branch Operations",
      "commands": ["branch"],
      "test_cases": [
        {
          "test_id": "TC-030",
          "priority": "P0",
          "command": "mediagit branch",
          "description": "Create new branch",
          "test_steps": [
            "Create initial commit on main",
            "Run 'mediagit branch feature-1'",
            "Verify branch reference created",
            "Verify branch points to current commit"
          ],
          "expected_result": "Branch created at current HEAD",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-031",
          "priority": "P0",
          "command": "mediagit branch switch",
          "description": "Switch to existing branch - CRITICAL TEST",
          "linked_issue": "ISS-001",
          "test_steps": [
            "Create main branch with file A.mp4",
            "Commit file A.mp4",
            "Create branch feature-1",
            "Switch to feature-1",
            "Add file B.stl",
            "Commit file B.stl",
            "Switch back to main",
            "VERIFY: Only A.mp4 visible in working directory",
            "VERIFY: B.stl NOT present in working directory",
            "Switch to feature-1",
            "VERIFY: Both A.mp4 and B.stl visible"
          ],
          "expected_result": "Working directory reflects target branch state",
          "status": "untested",
          "known_failure": true,
          "backends": ["local"]
        },
        {
          "test_id": "TC-032",
          "priority": "P0",
          "command": "mediagit branch switch",
          "description": "Index cleared when switching branches",
          "linked_issue": "ISS-002",
          "test_steps": [
            "On main branch, stage file C",
            "Don't commit",
            "Switch to feature branch",
            "Run 'mediagit status'",
            "VERIFY: Index is empty or appropriate warning shown"
          ],
          "expected_result": "Index cleared or user warned about uncommitted changes",
          "status": "untested",
          "known_failure": true,
          "backends": ["local"]
        },
        {
          "test_id": "TC-033",
          "priority": "P1",
          "command": "mediagit branch switch -c",
          "description": "Create and switch to new branch in one command",
          "test_steps": [
            "Run 'mediagit branch switch -c feature-2'",
            "Verify branch created and HEAD updated",
            "Verify working directory unchanged initially"
          ],
          "expected_result": "Branch created and switched successfully",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-034",
          "priority": "P1",
          "command": "mediagit branch delete",
          "description": "Delete merged branch",
          "test_steps": [
            "Create and merge feature branch",
            "Run 'mediagit branch delete feature'",
            "Verify branch reference removed"
          ],
          "expected_result": "Branch deleted successfully",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-035",
          "priority": "P1",
          "command": "mediagit branch list",
          "description": "List all branches",
          "test_steps": [
            "Create multiple branches",
            "Run 'mediagit branch list'",
            "Verify all branches shown with current branch marked"
          ],
          "expected_result": "All branches listed, current marked",
          "status": "untested",
          "backends": ["local"]
        }
      ]
    },
    {
      "category_id": "CAT-05",
      "name": "Status and Information",
      "commands": ["status", "log", "diff", "show", "stats"],
      "test_cases": [
        {
          "test_id": "TC-040",
          "priority": "P0",
          "command": "mediagit status",
          "description": "Show current branch and staging area",
          "test_steps": [
            "Run status with no commits",
            "Create commit",
            "Run status with clean tree",
            "Stage files",
            "Run status with staged files",
            "Verify all states reported correctly"
          ],
          "expected_result": "Accurate status for all repository states",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-041",
          "priority": "P1",
          "command": "mediagit log",
          "description": "Display commit history",
          "test_steps": [
            "Create multiple commits",
            "Run 'mediagit log'",
            "Verify commit order (newest first)",
            "Verify commit messages shown"
          ],
          "expected_result": "Commit history displayed correctly",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-042",
          "priority": "P1",
          "command": "mediagit diff",
          "description": "Show differences between commits",
          "test_steps": [
            "Create commit 1 with file A",
            "Modify file A or add file B",
            "Commit as commit 2",
            "Run 'mediagit diff <commit1> <commit2>'",
            "Verify differences shown"
          ],
          "expected_result": "File differences displayed",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-043",
          "priority": "P1",
          "command": "mediagit show",
          "description": "Display commit details",
          "test_steps": [
            "Create commit",
            "Run 'mediagit show <commit-id>'",
            "Verify commit metadata and content shown"
          ],
          "expected_result": "Commit details displayed",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-044",
          "priority": "P2",
          "command": "mediagit stats",
          "description": "Repository statistics",
          "test_steps": [
            "Create repository with multiple commits",
            "Add various file types",
            "Run 'mediagit stats'",
            "Verify statistics accurate"
          ],
          "expected_result": "Repository stats displayed",
          "status": "untested",
          "backends": ["local"]
        }
      ]
    },
    {
      "category_id": "CAT-06",
      "name": "Remote Operations - Storage Backend Integration",
      "commands": ["push", "pull"],
      "test_cases": [
        {
          "test_id": "TC-050",
          "priority": "P0",
          "command": "mediagit push",
          "description": "Push to Azure Blob Storage",
          "backend": "azure",
          "docker_service": "mediagit-azurite",
          "test_steps": [
            "Verify Azurite container running (port 10000-10002)",
            "Configure Azure backend in repository",
            "Create commits with test files",
            "Run 'mediagit push origin main'",
            "Verify objects uploaded to Azure blob storage",
            "Verify refs updated"
          ],
          "expected_result": "Objects and refs pushed to Azure successfully",
          "status": "untested",
          "backends": ["azure"]
        },
        {
          "test_id": "TC-051",
          "priority": "P0",
          "command": "mediagit push",
          "description": "Push to Google Cloud Storage",
          "backend": "gcs",
          "docker_service": "mediagit-gcs",
          "test_steps": [
            "Verify fake-gcs-server container running (port 4443)",
            "Configure GCS backend",
            "Create commits with test files",
            "Run 'mediagit push origin main'",
            "Verify objects uploaded to GCS",
            "Verify refs updated"
          ],
          "expected_result": "Objects and refs pushed to GCS successfully",
          "status": "untested",
          "backends": ["gcs"]
        },
        {
          "test_id": "TC-052",
          "priority": "P0",
          "command": "mediagit push",
          "description": "Push to MinIO (S3-compatible)",
          "backend": "minio",
          "docker_service": "mediagit-minio",
          "test_steps": [
            "Verify MinIO container running (port 9000-9001)",
            "Configure MinIO backend",
            "Create commits with test files",
            "Run 'mediagit push origin main'",
            "Verify objects uploaded to MinIO",
            "Verify refs updated"
          ],
          "expected_result": "Objects and refs pushed to MinIO successfully",
          "status": "untested",
          "backends": ["minio"]
        },
        {
          "test_id": "TC-053",
          "priority": "P0",
          "command": "mediagit pull",
          "description": "Pull from Azure Blob Storage",
          "backend": "azure",
          "test_steps": [
            "Push commits to Azure (TC-050)",
            "Clone to new directory or reset",
            "Run 'mediagit pull origin main'",
            "Verify objects downloaded",
            "Verify working directory updated"
          ],
          "expected_result": "Objects pulled from Azure, working directory updated",
          "status": "untested",
          "backends": ["azure"],
          "depends_on": ["TC-050"]
        },
        {
          "test_id": "TC-054",
          "priority": "P0",
          "command": "mediagit pull",
          "description": "Pull from Google Cloud Storage",
          "backend": "gcs",
          "test_steps": [
            "Push commits to GCS (TC-051)",
            "Clone to new directory or reset",
            "Run 'mediagit pull origin main'",
            "Verify objects downloaded",
            "Verify working directory updated"
          ],
          "expected_result": "Objects pulled from GCS, working directory updated",
          "status": "untested",
          "backends": ["gcs"],
          "depends_on": ["TC-051"]
        },
        {
          "test_id": "TC-055",
          "priority": "P0",
          "command": "mediagit pull",
          "description": "Pull from MinIO",
          "backend": "minio",
          "test_steps": [
            "Push commits to MinIO (TC-052)",
            "Clone to new directory or reset",
            "Run 'mediagit pull origin main'",
            "Verify objects downloaded",
            "Verify working directory updated"
          ],
          "expected_result": "Objects pulled from MinIO, working directory updated",
          "status": "untested",
          "backends": ["minio"],
          "depends_on": ["TC-052"]
        },
        {
          "test_id": "TC-056",
          "priority": "P1",
          "command": "mediagit push",
          "description": "Push large files (video >5MB) to all backends",
          "test_files": ["bbb_sunflower_1080p_30fps_normal.mp4"],
          "test_steps": [
            "Stage and commit large video file",
            "Push to Azure backend",
            "Push to GCS backend",
            "Push to MinIO backend",
            "Verify upload performance acceptable",
            "Verify file integrity"
          ],
          "expected_result": "Large files handled efficiently by all backends",
          "status": "untested",
          "backends": ["azure", "gcs", "minio"]
        }
      ]
    },
    {
      "category_id": "CAT-07",
      "name": "Merge and Rebase",
      "commands": ["merge", "rebase"],
      "test_cases": [
        {
          "test_id": "TC-060",
          "priority": "P0",
          "command": "mediagit merge",
          "description": "Fast-forward merge",
          "test_steps": [
            "Create main with commit A",
            "Create feature branch",
            "Add commit B on feature",
            "Switch to main",
            "Run 'mediagit merge feature'",
            "Verify fast-forward applied",
            "Verify working directory updated"
          ],
          "expected_result": "Fast-forward merge successful, working directory updated",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-061",
          "priority": "P1",
          "command": "mediagit merge",
          "description": "Three-way merge with no conflicts",
          "test_steps": [
            "Create divergent branches with different files",
            "Merge branches",
            "Verify merge commit created",
            "Verify both file sets present"
          ],
          "expected_result": "Three-way merge successful",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-062",
          "priority": "P1",
          "command": "mediagit merge",
          "description": "Merge with conflicts",
          "test_steps": [
            "Create branches with conflicting changes to same file",
            "Attempt merge",
            "Verify conflict detection",
            "Verify conflict markers or appropriate handling"
          ],
          "expected_result": "Conflicts detected and reported",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-063",
          "priority": "P2",
          "command": "mediagit rebase",
          "description": "Rebase feature branch onto main",
          "test_steps": [
            "Create divergent branches",
            "Rebase feature onto main",
            "Verify commits replayed",
            "Verify linear history"
          ],
          "expected_result": "Rebase successful, linear history maintained",
          "status": "untested",
          "backends": ["local"]
        }
      ]
    },
    {
      "category_id": "CAT-08",
      "name": "Repository Maintenance",
      "commands": ["gc", "fsck", "verify"],
      "test_cases": [
        {
          "test_id": "TC-070",
          "priority": "P1",
          "command": "mediagit gc",
          "description": "Garbage collection and optimization",
          "test_steps": [
            "Create repository with many commits",
            "Delete branches",
            "Run 'mediagit gc'",
            "Verify unreachable objects cleaned",
            "Verify repository optimized"
          ],
          "expected_result": "Repository cleaned and optimized",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-071",
          "priority": "P1",
          "command": "mediagit fsck",
          "description": "Check repository integrity",
          "test_steps": [
            "Create repository with commits",
            "Run 'mediagit fsck'",
            "Verify integrity checks pass",
            "Verify all objects accessible"
          ],
          "expected_result": "Integrity check passes",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-072",
          "priority": "P2",
          "command": "mediagit fsck",
          "description": "Detect corrupted objects",
          "test_steps": [
            "Create repository",
            "Manually corrupt an object file",
            "Run 'mediagit fsck'",
            "Verify corruption detected and reported"
          ],
          "expected_result": "Corruption detected and reported",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-073",
          "priority": "P2",
          "command": "mediagit verify",
          "description": "Verify commits and signatures",
          "test_steps": [
            "Create signed commits (if supported)",
            "Run 'mediagit verify'",
            "Verify signature validation"
          ],
          "expected_result": "Signatures verified",
          "status": "untested",
          "backends": ["local"]
        }
      ]
    },
    {
      "category_id": "CAT-09",
      "name": "Filter Driver and Tracking",
      "commands": ["filter", "install", "track", "untrack"],
      "test_cases": [
        {
          "test_id": "TC-080",
          "priority": "P1",
          "command": "mediagit install",
          "description": "Install MediaGit filter driver",
          "test_steps": [
            "Run 'mediagit install'",
            "Verify git config updated",
            "Verify filter driver registered"
          ],
          "expected_result": "Filter driver installed",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-081",
          "priority": "P1",
          "command": "mediagit track",
          "description": "Track file patterns with MediaGit",
          "test_steps": [
            "Run 'mediagit track \"*.mp4\"'",
            "Verify .gitattributes updated",
            "Add video file",
            "Verify filter applied"
          ],
          "expected_result": "Pattern tracked, filter applied",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-082",
          "priority": "P2",
          "command": "mediagit filter clean",
          "description": "Clean filter operation",
          "test_steps": [
            "Configure filter",
            "Add tracked file",
            "Verify clean filter converts file to pointer"
          ],
          "expected_result": "File converted to pointer",
          "status": "untested",
          "backends": ["local"]
        },
        {
          "test_id": "TC-083",
          "priority": "P2",
          "command": "mediagit filter smudge",
          "description": "Smudge filter operation",
          "test_steps": [
            "Checkout file with pointer",
            "Verify smudge filter restores actual file"
          ],
          "expected_result": "File restored from storage",
          "status": "untested",
          "backends": ["local"]
        }
      ]
    },
    {
      "category_id": "CAT-10",
      "name": "End-to-End Workflows",
      "commands": ["multiple"],
      "test_cases": [
        {
          "test_id": "TC-090",
          "priority": "P0",
          "command": "complete workflow",
          "description": "E2E: Multi-branch workflow with media files",
          "test_files": ["101394-video-720.mp4", "1965_ac_shelby_427_cobra_sc.glb", "_Amir_Tangsiri__Dokhtare_Koli.flac"],
          "test_steps": [
            "1. Initialize repository",
            "2. Add and commit video on main",
            "3. Create feature-audio branch",
            "4. Switch to feature-audio",
            "5. VERIFY: Only video visible",
            "6. Add and commit audio file",
            "7. Switch to main",
            "8. VERIFY: Only video visible (audio not present)",
            "9. Create feature-3d branch",
            "10. Switch to feature-3d",
            "11. Add and commit 3D model",
            "12. Switch back to main",
            "13. VERIFY: Only video visible",
            "14. Merge feature-audio",
            "15. VERIFY: Video + audio visible",
            "16. Merge feature-3d",
            "17. VERIFY: Video + audio + 3D model all visible"
          ],
          "expected_result": "Complete workflow with proper file isolation per branch",
          "status": "untested",
          "linked_issues": ["ISS-001", "ISS-002"],
          "backends": ["local"]
        },
        {
          "test_id": "TC-091",
          "priority": "P0",
          "command": "complete workflow",
          "description": "E2E: Push/pull workflow across all storage backends",
          "test_steps": [
            "1. Create repository with media files",
            "2. Commit several files",
            "3. Push to Azure backend",
            "4. Clone to directory A from Azure",
            "5. Verify working directory matches",
            "6. Push to GCS backend",
            "7. Clone to directory B from GCS",
            "8. Verify working directory matches",
            "9. Push to MinIO backend",
            "10. Clone to directory C from MinIO",
            "11. Verify all clones identical"
          ],
          "expected_result": "Consistent push/pull across all backends",
          "status": "untested",
          "backends": ["azure", "gcs", "minio"]
        },
        {
          "test_id": "TC-092",
          "priority": "P1",
          "command": "complete workflow",
          "description": "E2E: Large file handling across workflow",
          "test_files": ["bbb_sunflower_1080p_30fps_normal.mp4", "1965_ac_shelby_427_cobra_sc.glb"],
          "test_steps": [
            "1. Add large video (5MB+) and 3D model (13MB+)",
            "2. Commit to main",
            "3. Create feature branch",
            "4. Switch branches back and forth",
            "5. Verify large files handled correctly",
            "6. Push to remote backend",
            "7. Pull from remote",
            "8. Verify file integrity"
          ],
          "expected_result": "Large files handled efficiently throughout workflow",
          "status": "untested",
          "backends": ["local", "azure", "gcs", "minio"]
        }
      ]
    }
  ],
  "test_execution_summary": {
    "total_test_cases": 50,
    "by_priority": {
      "P0": 20,
      "P1": 22,
      "P2": 8,
      "P3": 0
    },
    "by_status": {
      "untested": 50,
      "in_progress": 0,
      "passed": 0,
      "failed": 0,
      "blocked": 0
    },
    "by_backend": {
      "local": 40,
      "azure": 8,
      "gcs": 8,
      "minio": 8
    },
    "known_failures": 2,
    "estimated_execution_time_hours": 12
  },
  "fix_implementation_plan": [
    {
      "phase": 1,
      "name": "Implement Checkout Mechanism",
      "priority": "P0",
      "tasks": [
        {
          "task_id": "FIX-001",
          "description": "Implement checkout function in mediagit-versioning",
          "file": "crates/mediagit-versioning/src/lib.rs",
          "details": "Create checkout module to restore working directory from commit tree",
          "estimated_hours": 4
        },
        {
          "task_id": "FIX-002",
          "description": "Add working directory update to branch switch",
          "file": "crates/mediagit-cli/src/commands/branch.rs",
          "details": "Call checkout when switching branches to update working directory",
          "depends_on": ["FIX-001"],
          "estimated_hours": 2
        },
        {
          "task_id": "FIX-003",
          "description": "Implement index management on branch switch",
          "file": "crates/mediagit-cli/src/commands/branch.rs",
          "details": "Clear or update index when switching branches",
          "estimated_hours": 2
        }
      ]
    },
    {
      "phase": 2,
      "name": "Testing and Validation",
      "priority": "P0",
      "tasks": [
        {
          "task_id": "FIX-004",
          "description": "Execute critical test cases (P0)",
          "details": "Run all P0 test cases to validate fixes",
          "depends_on": ["FIX-001", "FIX-002", "FIX-003"],
          "estimated_hours": 6
        },
        {
          "task_id": "FIX-005",
          "description": "Backend integration testing",
          "details": "Test push/pull with Azure, GCS, MinIO",
          "depends_on": ["FIX-004"],
          "estimated_hours": 4
        }
      ]
    },
    {
      "phase": 3,
      "name": "Comprehensive Testing",
      "priority": "P1",
      "tasks": [
        {
          "task_id": "FIX-006",
          "description": "Execute all remaining test cases",
          "details": "Run P1 and P2 test cases",
          "depends_on": ["FIX-005"],
          "estimated_hours": 8
        }
      ]
    }
  ]
}
